<!DOCTYPE html>
<html lang="en">
<head>
    <style>

.card {
  background-color: white;
  border: 1px solid #333;
  border-radius: .5rem;
  padding: .5rem;
  max-width: 300px;
  margin: 0 auto;
  animation: fade 250ms ease-in-out forwards;
}

.form-group {
  display: flex;
  flex-direction: column;
  margin-bottom: .5rem;
  gap: .25em;
}

.form-group:last-child {
  margin: 0;
}

.form-group > label {
  font-weight: bold;
  font-size: .8em;
  color: #333;
}

.form-group > input {
  border: 1px solid #333;
  border-radius: .25em;
  font-size: 1rem;
  padding: .25em;
}

.step-title {
  margin: 0;
  margin-bottom: 1rem;
  text-align: center;
}

.card.active {
  animation: slide 250ms 125ms ease-in-out both;
}

.multi-step-form {
  overflow: hidden;
  position: relative;
}

.hide {
  display: none;
}

@keyframes slide {
  0% {
    transform: translateX(200%);
    opacity: 0;
  }
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes fade {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(.75);
    opacity: 0;
  }
  100% {
    opacity: 0;
    transform: scale(0);
  }
}

@import url('https://fonts.googleapis.com/css?family=Alatsi|Poppins&display=swap');

$color-primary: #A099FB;
$color-primary-dark: #6C5CEA;
$color-light: #fff;
$color-dark: #444;
$color-secondary-light:#FEB6D3;
$color-secondary: #FE79AB;
$color-success: #01CECB;
$color-success-light: #96E6E6;
$color-danger: #f32c52;
$color-danger-light: #ff6c88;


body{
	height: 100vh;
	width: 100%;
	margin: 0;
	background: #f8f8f8;
	justify-content: center;
	align-items:center;
	display: flex;
}

.date{
		background-color: #ffffff;
    border: 0 solid transparent;
    border-radius: 0.25rem;
    -webkit-box-shadow: 0 0.5rem 1rem 0 rgba(44, 51, 73, 0.1);
    box-shadow: 0 0.5rem 1rem 0 rgba(44, 51, 73, 0.1);
    color: #222b45;
    font-family: Open Sans, sans-serif;
    font-size: 0.9375rem;
    font-weight: 400;
    line-height: 1.25rem;
    margin-bottom: 1.875rem;
    scrollbar-face-color: #e4e9f2;
    scrollbar-track-color: #f7f9fc;
		width: 19.25rem;
		border: none;
    margin: 0;
	
	& .result{
		padding: 1rem 1.25rem;
    border-bottom: 1px solid #edf1f7;
    border-top-left-radius: 0.25rem;
    border-top-right-radius: 0.25rem;
    color: #222b45;
    font-family: Open Sans, sans-serif;
    font-size: 0.9375rem;
    font-weight: 600;
    line-height: 1.5rem;
		
		& .date-title{
			display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -ms-flex-align: center;
    align-items: center;
    font-size: 1.125rem;
    font-weight: 700;
    line-height: 1.5rem;
		}
		
		& .label{
			font-size: 1.125rem;
    	font-weight: 400;
    	line-height: 1.125rem;
		}
	}
	
	& .selector{
		display: flex;
		padding: 1rem 1.25rem;
		justify-content:space-between;
		align-items: center;
		& .left , .right{
			cursor: pointer;
   		font-family: Open Sans, sans-serif;
    	font-weight: 700;
			background-color: transparent;
    	border-color: transparent;
    	border-style: solid;
			border: none;
    	text-transform: uppercase;
			border-radius: 0.25rem;
			font-size: 0.75rem;
    	line-height: 1rem;
			transition-property: background-color,border-color,box-shadow,color,-webkit-box-shadow;
    -webkit-transition-timing-function: ease-in;
    	transition-timing-function: ease-in;
			
			&:focus{
				box-shadow: 0 0 0 0.375rem rgba(143, 155, 179, 0.16), inset 0 0 0 100vmax rgba(143, 155, 179, 0.16);
				outline: none;
			}
		}
		
		& .month{
			background-color: $color-primary-dark;
    	border-color: $color-primary-dark;
    	color: #ffffff;
			padding: 0.6875rem 1.125rem;
			border-style: solid;
    	border-width: 0.0625rem;
    	text-transform: uppercase;
			border-radius: 0.25rem;
			font-size: 0.875rem;
    	line-height: 1rem;
			cursor: pointer;
    	font-family: Open Sans, sans-serif;
    	font-weight: 700;
		}
	}
	
	& .picker{
		width: 100%;
		
		& .days{
			background: #f7f9fc;
   	 	border-top: 1px solid #edf1f7;
    	border-bottom: 1px solid #edf1f7;
			display: flex;
			justify-content:center;
			align-items:center;
			padding: 1rem 0;
			& span{
				color: #8f9bb3;
				width: 2.625rem;
    		color: #8f9bb3;
    		font-size: 0.75rem;
    		font-weight: 700;
    		line-height: 1rem;
				text-align:center;
			}
		}
		
		& .dates{
			padding: 1rem 0;
			
			&-row{
				display: flex;
			}
			& span{
				cursor: pointer;
				width: 2.625rem;
    		height: 2.625rem;
				font-family: Open Sans, sans-serif;
    		font-size: 0.9375rem;
    		font-weight: 400;
    		line-height: 1.25rem;
    		border-radius: 0.25rem;
		    color: #222b45;
				justify-content: center;
    		margin: 1px;
				align-items: center;
    -webkit-box-pack: center;
				display: flex;
    -webkit-box-align: center;
				
				&.active{
					background: $color-primary-dark;
					color: $color-light;
				}
			}
		}
		
		& .months{
			padding: 1rem 0;
			display: none;
				&-row{
				display: flex;
				justify-content: space-between;
				align-items:center;
			}
			& span{
				cursor: pointer;
				width: 2.625rem;
    		height: 2.625rem;
				color: #8f9bb3;
				width: 2.625rem;
    		color: #8f9bb3;
    		font-size: 0.75rem;
    		font-weight: 700;
    		line-height: 1rem;
				text-align:center;
    		border-radius: 0.25rem;
		    color: #222b45;
				justify-content: center;
    		margin: 1px;
				align-items: center;
    -webkit-box-pack: center;
				display: flex;
    -webkit-box-align: center;
				
				&.active{
					background: $color-primary-dark;
					color: $color-light;
				}
			}
		}
	}
}

input[type="time"] {
  padding-left: 1.5em;
  background-repeat: no-repeat;
  background-position: 0.25em center;
  background-size: 1em;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='40' height='40'><circle cx='20' cy='20' r='18.5' fill='none' stroke='%23222' stroke-width='3' /><path d='M20,4 20,8 M4,20 8,20 M36,20 32,20 M20,36 20,32' stroke='%23bbb' stroke-width='1' /><g fill='%23222' stroke='%23222' stroke-width='2'><circle cx='20' cy='20' r='2' /><path d='M20,24 20,5' style='transform:rotate(120deg); transform-origin: 50% 50%;' /><path d='M20,24 20,8' style='transform:rotate(20deg); transform-origin: 50% 50%;' /></g></svg>");
  /* this style to complete the styling*/
  border: 0.125em solid #369;
  border-radius: 0.25em;
  font-size: 3rem;
}
    </style>


  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <!-- <link rel="stylesheet" href="styles.css">
  <script src="script.js" defer></script> -->

</head>
<body>
  <form data-multi-step class="multi-step-form">
    <div class="card" data-step>
      <h3 class="step-title">This is step 1</h3>

<<<<<<< HEAD
        <!-- Progress Form -->
        <form id="progress-form" class="p-4 progress-form" action="https://httpbin.org/post" lang="en" novalidate>
      
          <!-- Step Navigation -->
          <div class="d-flex align-items-start mb-3 sm:mb-5 progress-form__tabs" role="tablist">
            <button id="progress-form__tab-1" class="flex-1 px-0 pt-2 progress-form__tabs-item" type="button" role="tab" aria-controls="progress-form__panel-1" aria-selected="true">
              <span class="d-block step" aria-hidden="true">Step 1 <span class="sm:d-none">of 5</span></span>
            </button>
            <button id="progress-form__tab-2" class="flex-1 px-0 pt-2 progress-form__tabs-item" type="button" role="tab" aria-controls="progress-form__panel-2" aria-selected="false" tabindex="-1" aria-disabled="true">
              <span class="d-block step" aria-hidden="true">Step 2 <span class="sm:d-none">of 5</span></span>

            </button>
            <button id="progress-form__tab-3" class="flex-1 px-0 pt-2 progress-form__tabs-item" type="button" role="tab" aria-controls="progress-form__panel-3" aria-selected="false" tabindex="-1" aria-disabled="true">
              <span class="d-block step" aria-hidden="true">Step 3 <span class="sm:d-none">of 5</span></span>
              
            </button>
            <button id="progress-form__tab-4" class="flex-1 px-0 pt-2 progress-form__tabs-item" type="button" role="tab" aria-controls="progress-form__panel-4" aria-selected="false" tabindex="-1" aria-disabled="true">
              <span class="d-block step" aria-hidden="true">Step 4 <span class="sm:d-none">of 5</span></span>
              
            </button>
            <button id="progress-form__tab-5" class="flex-1 px-0 pt-2 progress-form__tabs-item" type="button" role="tab" aria-controls="progress-form__panel-5" aria-selected="false" tabindex="-1" aria-disabled="true">
              <span class="d-block step" aria-hidden="true">Step 5 <span class="sm:d-none">of 5</span></span>
              
            </button>
          </div>
          <!-- / End Step Navigation -->
      
          <!-- Step 1 -->
          <section id="progress-form__panel-1" role="tabpanel" aria-labelledby="progress-form__tab-1" tabindex="0">
            <div class="sm:d-grid sm:grid-col-2 sm:mt-3">
              <div class="mt-3 sm:mt-0 form__field">
                <label for="first-name">
                    Where are you leaving from?
                  <span data-required="true" aria-hidden="true"></span>
                </label>
                <input id="first-name" type="text" name="first-name" autocomplete="given-name" required placeholder="e.g. Western Blvd">
              </div>

      
            <div class="d-flex align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
              <button type="button" data-action="next">
                Continue
              </button>
            </div>
          </section>
          <!-- / End Step 1 -->
      
          <!-- Step 2 -->
          <section id="progress-form__panel-2" role="tabpanel" aria-labelledby="progress-form__tab-2" tabindex="0" hidden>
            <div class="mt-3 form__field">
              <label for="address">
                Where are you heading?
                <span data-required="true" aria-hidden="true"></span>
              </label>
              <input id="address" type="text" name="address" autocomplete="shipping address-line1" required placeholder="e.g. Varsity Dr">
            </div>
      
            <div class="d-flex flex-column-reverse sm:flex-row align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
              <button type="button" class="mt-1 sm:mt-0 button--simple" data-action="prev">
                Back
              </button>
              <button type="button" data-action="next">
                Continue
              </button>
            </div>
          </section>
          <!-- / End Step 2 -->

          <section id="progress-form__panel-3" role="tabpanel" aria-labelledby="progress-form__tab-3" tabindex="0" hidden>
            <div class="mt-3 form__field">
              <label for="route">
                What is your route?
                <span data-required="true" aria-hidden="true"></span>
              </label>
              <label class="form__choice-wrapper">
                <input type="radio" name="product-purchase" required value="A">
                <span>Route 40</span>
              </label>
              <label class="form__choice-wrapper">
                <input type="radio" name="product-purchase" required value="B">
                <span>Route 50</span>
              </label>
              <label class="form__choice-wrapper">
                <input type="radio" name="product-purchase" required value="C">
                <span>Route 52</span>
              </label>
            </div>
      
            <div class="d-flex flex-column-reverse sm:flex-row align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
              <button type="button" class="mt-1 sm:mt-0 button--simple" data-action="prev">
                Back
              </button>
              <button type="button" data-action="next">
                Continue
              </button>
            </div>
          </section>

          <section id="progress-form__panel-4" role="tabpanel" aria-labelledby="progress-form__tab-4" tabindex="0" hidden>
            <div class="mt-3 form__field">
              <label for="from">Date of travel</label>
              <input type="date" name="from">
            </div>
      
            <div class="d-flex flex-column-reverse sm:flex-row align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
              <button type="button" class="mt-1 sm:mt-0 button--simple" data-action="prev">
                Back
              </button>
              <button type="submit">
                Submit
              </button>
            </div>
          </section>

          <section id="progress-form__panel-5" role="tabpanel" aria-labelledby="progress-form__tab-5" tabindex="0" hidden>
            <div class="mt-3 form__field">
              <label for="from">Time of travel</label>
              <input type="time" id="timedepart">
            </div>
      
            <div class="d-flex flex-column-reverse sm:flex-row align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
              <button type="button" class="mt-1 sm:mt-0 button--simple" data-action="prev">
                Back
              </button>
              <button type="submit">
                Submit
              </button>
            </div>
          </section>

          
          <!-- Step 3 
          <section id="progress-form__panel-3" role="tabpanel" aria-labelledby="progress-form__tab-3" tabindex="0" hidden>
      
            
              <legend>
                What is your route?
              </legend>
              <label class="form__choice-wrapper">
                <input type="radio" name="product-purchase" required value="A">
                <span>Route 40</span>
              </label>
              <label class="form__choice-wrapper">
                <input type="radio" name="product-purchase" required value="B">
                <span>Route 50</span>
              </label>
              <label class="form__choice-wrapper">
                <input type="radio" name="product-purchase" required value="C">
                <span>Route 52</span>
              </label>
           
            
            <div class="d-flex flex-column-reverse sm:flex-row align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
              <button type="button" class="mt-1 sm:mt-0 button--simple" data-action="prev">
                Back
              </button>
              <button type="button" data-action="next">
                Continue
              </button>
            </div>
          </section>
          
          <section id="progress-form__panel-4" role="tabpanel" aria-labelledby="progress-form__tab-4" tabindex="0" hidden>
            <div class="mt-3 form__field">
              <label for="from">Date of travel</label>
              <input type="date" name="from">
            </div>
            <div class="d-flex flex-column-reverse sm:flex-row align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
              <button type="button" class="mt-1 sm:mt-0 button--simple" data-action="prev">
                Back
              </button>
              <button type="submit">
                Submit
              </button>
            </div>
          </section>
         
          <section id="progress-form__panel-5" role="tabpanel" aria-labelledby="progress-form__tab-5" tabindex="0" hidden>
            <div class="mt-3 form__field">
              <label for="from">Time of travel</label>
              <input type="time">
            </div>
            <div class="d-flex flex-column-reverse sm:flex-row align-items-center justify-center sm:justify-end mt-4 sm:mt-5">
              <button type="button" class="mt-1 sm:mt-0 button--simple" data-action="prev">
                Back
              </button>
              <button type="submit">
                Submit
              </button>
            </div>
          </section>-->
          <!-- / End Step 5 -->
          <!-- Thank You -->
          <section id="progress-form__thank-you" hidden>
            <p>Thank you for your submission!</p>
            <p>We appreciate you contacting us. One of our team members will get back to you very&nbsp;soon.</p>
          </section>
          <!-- / End Thank You -->
      
        </form>
        <!-- / End Progress Form -->
      
=======
      <div class="form-group">
        <label for="text">Where are you leaving to?</label>
        <input type="text" name="start-destination" id="start-destination">
>>>>>>> 1aa8c3537960ef018fbe3797dbfe48d13361c0ab
      </div>

      <button type="button" data-next>Next</button>
    </div>


    <div class="card" data-step>
      <h3 class="step-title">This is step 2</h3>


      <div class="form-group">
        <label for="text">Where are you heading?</label>
        <input type="text" name="end-destination" id="end-destination">
      </div>

      <button type="button" data-previous>Previous</button>
      <button type="button" data-next>Next</button>
    </div>



    <div class="card" data-step>
      <h3 class="step-title">This is step 3</h3>
      
      <div class="form-group">
        <legend>
            What is your route?
          </legend>
          <label class="form__choice-wrapper">
            <input type="radio" name="product-purchase" required value="A">
            <span>Route 40</span>
          </label>
          <label class="form__choice-wrapper">
            <input type="radio" name="product-purchase" required value="B">
            <span>Route 50</span>
          </label>
          <label class="form__choice-wrapper">
            <input type="radio" name="product-purchase" required value="C">
            <span>Route 52</span>
          </label>
      </div>


      <button type="button" data-previous>Previous</button>
      <button type="button" data-next>Next</button>
    </div>

    <div class="card" data-step>
        <h3 class="step-title">This is step 4</h3>
        
        <div class="form-group">
            <label for="from">Date of travel</label>
            <input type="date" name="from">
        </div>
  
  
        <button type="button" data-previous>Previous</button>
        <button type="submit">Submit</button>
      </div>


  </form>

  <script>

const multiStepForm = document.querySelector("[data-multi-step]")
const formSteps = [...multiStepForm.querySelectorAll("[data-step]")]
let currentStep = formSteps.findIndex(step => {
  return step.classList.contains("active")
})

if (currentStep < 0) {
  currentStep = 0
  showCurrentStep()
}

multiStepForm.addEventListener("click", e => {
  let incrementor
  if (e.target.matches("[data-next]")) {
    incrementor = 1
  } else if (e.target.matches("[data-previous]")) {
    incrementor = -1
  }

  if (incrementor == null) return

  const inputs = [...formSteps[currentStep].querySelectorAll("input")]
  const allValid = inputs.every(input => input.reportValidity())
  if (allValid) {
    currentStep += incrementor
    showCurrentStep()
  }
})

formSteps.forEach(step => {
  step.addEventListener("animationend", e => {
    formSteps[currentStep].classList.remove("hide")
    e.target.classList.toggle("hide", !e.target.classList.contains("active"))
  })
})

function showCurrentStep() {
  formSteps.forEach((step, index) => {
    step.classList.toggle("active", index === currentStep)
  })
}
  </script>


<<<<<<< HEAD
      if (fieldParent.contains(fieldError)) {
        if (field.matches('fieldset')) {
          updateChoice(field, false);
        } else if (field.matches('[type="radio"], [type="checkbox"]')) {
          updateChoice(field.closest('fieldset'), false);
        } else {
          field.removeAttribute('aria-invalid');
          field.removeAttribute('aria-describedby');
        }

        fieldParent.removeChild(fieldError);
      }
    }
  }

  /*****************************************************************************
   * Expects a Node (field or fieldset).
   *
   * Reports the field's overall validity to the user based on conditions set
   * within `getValidationData()`.
   */

  function reportValidity(field) {
    const validation = getValidationData(field);

    if (!validation.isValid && validation.message) {
      reportError(field, validation.message);
    } else if (!validation.isValid) {
      reportError(field);
    } else {
      reportSuccess(field);
    }
  }

  // Form Progression

  /*****************************************************************************
   * Resets the state of all tabs and tab panels.
   */

  function deactivateTabs() {
    // Reset state of all tab items
    tabItems.forEach(tab => {
      tab.setAttribute('aria-selected', 'false');
      tab.setAttribute('tabindex', '-1');
    });

    // Reset state of all panels
    tabPanels.forEach(panel => {
      panel.setAttribute('hidden', '');
    });
  }

  /*****************************************************************************
   * Expects an integer.
   *
   * Shows the desired tab and its associated tab panel, then updates the form's
   * current step to match the tab's index.
   */

  function activateTab(index) {
    const thisTab   = tabItems[index]
        , thisPanel = tabPanels[index];

    // Close all other tabs
    deactivateTabs();

    // Focus the activated tab for accessibility
    thisTab.focus();

    // Set the interacted tab to active
    thisTab.setAttribute('aria-selected', 'true');
    thisTab.removeAttribute('tabindex');

    // Display the associated tab panel
    thisPanel.removeAttribute('hidden');

    // Update the current step with the interacted tab's index value
    currentStep = index;
  }

  /*****************************************************************************
   * Expects an event from a click listener.
   */

  function clickTab(e) {
    activateTab([...tabItems].indexOf(e.currentTarget));
  }

  /*****************************************************************************
   * Expects an event from a keydown listener.
   */

  function arrowTab(e) {
    const { keyCode, target } = e;

    /**
     * If the current tab has an enabled next/previous sibling, activate it.
     * Otherwise, activate the tab at the beginning/end of the list.
     */

    const targetPrev  = target.previousElementSibling
        , targetNext  = target.nextElementSibling
        , targetFirst = target.parentElement.firstElementChild
        , targetLast  = target.parentElement.lastElementChild;

    const isDisabled = node => node.hasAttribute('aria-disabled');

    switch (keyCode) {
      case 37: // Left arrow
        if (progressForm.contains(targetPrev) && !isDisabled(targetPrev)) {
          activateTab(currentStep - 1);
        } else if (!isDisabled(targetLast)) {
          activateTab(tabItems.length - 1);
        } break;
      case 39: // Right arrow
        if (progressForm.contains(targetNext) && !isDisabled(targetNext)) {
          activateTab(currentStep + 1);
        } else if (!isDisabled(targetFirst)) {
          activateTab(0);
        } break;
    }
  }

  /*****************************************************************************
   * Expects a boolean.
   *
   * Updates the visual state of the progress bar and makes the next tab
   * available for interaction (if there is a next tab).
   */

  // Immediately attach event listeners to the first tab (happens only once)
  tabItems[0].addEventListener('click', clickTab);
  tabItems[0].addEventListener('keydown', arrowTab);

  function handleProgress(isComplete) {
    const currentTab = tabItems[currentStep]
        , nextTab    = tabItems[currentStep + 1];

    if (isComplete) {
      currentTab.setAttribute('data-complete', 'true');

      /**
       * Verify that there is, indeed, a next tab before modifying or listening
       * to it. In case we've reached the last item in the tablist.
       */

      if (progressForm.contains(nextTab)) {
        nextTab.removeAttribute('aria-disabled');

        nextTab.addEventListener('click', clickTab);
        nextTab.addEventListener('keydown', arrowTab);
      }

    } else {
      currentTab.setAttribute('data-complete', 'false');
    }
  }

  // Form Interactions

  /*****************************************************************************
   * Returns a function that only executes after a delay.
   *
   * https://davidwalsh.name/javascript-debounce-function
   */

  const debounce = (fn, delay = 500) => {
    let timeoutID;

    return (...args) => {
      if (timeoutID) {
        clearTimeout(timeoutID);
      }

      timeoutID = setTimeout(() => {
        fn.apply(null, args);
        timeoutID = null;
      }, delay);
    };
  };

  /*****************************************************************************
   * Waits 0.5s before reacting to any input events. This reduces the frequency
   * at which the listener is fired, making the errors less "noisy". Improves
   * both performance and user experience.
   */

  progressForm.addEventListener('input', debounce(e => {
    const { target } = e;

    validateStep(currentStep).then(() => {

      // Update the progress bar (step complete)
      handleProgress(true);

    }).catch(() => {

      // Update the progress bar (step incomplete)
      handleProgress(false);

    });

    // Display or remove any error messages
    reportValidity(target);
  }));

  /****************************************************************************/

  progressForm.addEventListener('click', e => {
    const { target } = e;

    if (target.matches('[data-action="next"]')) {
      validateStep(currentStep).then(() => {

        // Update the progress bar (step complete)
        handleProgress(true);

        // Progress to the next step
        activateTab(currentStep + 1);

      }).catch(invalidFields => {

        // Update the progress bar (step incomplete)
        handleProgress(false);

        // Show errors for any invalid fields
        invalidFields.forEach(field => {
          reportValidity(field);
        });

        // Focus the first found invalid field for the user
        invalidFields[0].focus();

      });
    }

    if (target.matches('[data-action="prev"]')) {

      // Revisit the previous step
      activateTab(currentStep - 1);

    }
  });

  // Form Submission

  /*****************************************************************************
   * Returns the user's IP address.
   */

  async function getIP(url = 'https://api.ipify.org?format=json') {
    const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json'
      }
    });

    if (!response.ok) {
      throw new Error(response.statusText);
    }

    return response.json();
  }

  /*****************************************************************************
   * POSTs to the specified endpoint.
   */

  async function postData(url = '', data = {}) {
    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    });

    if (!response.ok) {
      throw new Error(response.statusText);
    }

    return response.json();
  }

  /****************************************************************************/

  function disableSubmit() {
    const submitButton = progressForm.querySelector('[type="submit"]');

    if (progressForm.contains(submitButton)) {

      // Update the state of the submit button
      submitButton.setAttribute('disabled', '');
      submitButton.textContent = 'Submitting...';

    }
  }

  /****************************************************************************/

  function handleSuccess(response) {
    const thankYou = progressForm.querySelector('#progress-form__thank-you');

    // Clear all HTML Nodes that are not the thank you panel
    while (progressForm.firstElementChild !== thankYou) {
      progressForm.removeChild(progressForm.firstElementChild);
    }

    thankYou.removeAttribute('hidden');

    // Logging the response from httpbin for quick verification
    console.log(response);
  }

  /****************************************************************************/

  function handleError(error) {
    const submitButton = progressForm.querySelector('[type="submit"]');

    if (progressForm.contains(submitButton)) {
      const errorText = document.createElement('p');

      // Reset the state of the submit button
      submitButton.removeAttribute('disabled');
      submitButton.textContent = 'Submit';

      // Display an error message for the user
      errorText.classList.add('m-0', 'form__error-text');
      errorText.textContent = `Sorry, your submission could not be processed.
        Please try again. If the issue persists, please contact our support
        team. Error message: ${error}`;

      submitButton.parentElement.prepend(errorText);
    }
  }

  /****************************************************************************/

  progressForm.addEventListener('submit', e => {

    // Prevent the form from submitting
    e.preventDefault();

    // Get the API endpoint using the form action attribute
    const form = e.currentTarget
        , API  = new URL(form.action);

    validateStep(currentStep).then(() => {

      // Indicate that the submission is working
      disableSubmit();

      // Prepare the data
      const formData   = new FormData(form)
          , formTime   = new Date().getTime()
          , formFields = [];

      // Format the data entries
      for (const [name, value] of formData) {
        formFields.push({
          'name': name,
          'value': value
        });
      }

      // Get the user's IP address (for fun)
      // Build the final data structure, including the IP
      // POST the data and handle success or error
      getIP().then(response => {
        return {
          'fields': formFields,
          'meta': {
            'submittedAt': formTime,
            'ipAddress': response.ip
          }
        };
      })
      .then(data => postData(API, data))
      .then(response => {
        setTimeout(() => {
          handleSuccess(response)
        }, 5000); // An artificial delay to show the state of the submit button
      })
      .catch(error => {
        setTimeout(() => {
          handleError(error)
        }, 5000); // An artificial delay to show the state of the submit button
      });

    }).catch(invalidFields => {

      // Show errors for any invalid fields
      invalidFields.forEach(field => {
        reportValidity(field);
      });

      // Focus the first found invalid field for the user
      invalidFields[0].focus();

    });
  });
});

document.querySelector("input[type='time']").addEventListener("input", function() {
  const reTime = /^([0-1][0-9]|2[0-3]):[0-5][0-9]$/;
  if (reTime.exec(this.value)) {
    const minute = Number(this.value.substring(3,5));
    const hour = Number(this.value.substring(0,2)) % 12 + (minute / 60);
    this.style.backgroundImage = `url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='40' height='40'><circle cx='20' cy='20' r='18.5' fill='none' stroke='%23222' stroke-width='3' /><path d='M20,4 20,8 M4,20 8,20 M36,20 32,20 M20,36 20,32' stroke='%23bbb' stroke-width='1' /><g fill='%23222' stroke='%23222' stroke-width='2'><circle cx='20' cy='20' r='2' /><path d='M20,24 20,5' style='transform:rotate(${360 * minute / 60}deg); transform-origin: 50% 50%;' /><path d='M20,24 20,8' style='transform:rotate(${360 * hour / 12}deg); transform-origin: 50% 50%;' /></g></svg>")`;
  }
});
      </script>
=======
>>>>>>> 1aa8c3537960ef018fbe3797dbfe48d13361c0ab
</body>
</html>